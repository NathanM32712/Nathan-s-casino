<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Blackjack</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --bg: #031026;
      --fg: #cfefff;
      --accent: #48b0ff;
      --muted: #9bd6ff;
      --danger: #ff6b6b;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: Segoe UI, Roboto, system-ui, sans-serif;
    }
    .wrap {
      max-width: 960px;
      margin: 40px auto;
      padding: 20px;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    h1 {
      font-size: 24px;
      color: var(--accent);
      margin: 0;
    }
    .home-btn {
      background: var(--accent);
      color: #001;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    .table {
      background: #06273f;
      border-radius: 12px;
      padding: 20px;
    }
    .row {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }
    .area {
      flex: 1;
      background: #08314a;
      border-radius: 10px;
      padding: 12px;
    }
    .hand-title {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .hand {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .card {
      width: 80px;
      height: 110px;
      background: #fff;
      color: #022;
      border-radius: 8px;
      padding: 8px;
      font-weight: bold;
      box-shadow: 0 6px 18px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .card.red { color: #c62828; }
    .card .top, .card .bot { font-size: 14px; }
    .card .center { font-size: 28px; text-align: center; }
    .controls {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      align-items: center;
    }
    button {
      background: linear-gradient(180deg,var(--accent),#1e90ff);
      border: none;
      color: #001;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-ghost {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.06);
      color: var(--muted);
    }
    .status {
      margin-top: 12px;
      font-size: 14px;
      color: var(--muted);
    }
    .small {
      font-size: 13px;
      color: var(--muted);
    }
    .win { color: #7fff7f; font-weight: bold; }
    .lose { color: var(--danger); font-weight: bold; }
    input[type="number"] {
      width: 80px;
      padding: 6px;
      border-radius: 6px;
      border: none;
      background: #072a3f;
      color: var(--fg);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Blackjack</h1>
      <button class="home-btn" onclick="location.href='home.html'">üè† Home</button>
    </header>

    <div class="table">
      <div class="row">
        <div class="area">
          <div class="hand-title">Player</div>
          <div id="playerHand" class="hand"></div>
          <div id="playerValue" class="small"></div>
        </div>
        <div class="area">
          <div class="hand-title">Dealer</div>
          <div id="dealerHand" class="hand"></div>
          <div id="dealerValue" class="small"></div>
        </div>
      </div>

      <div class="controls">
        <button id="dealBtn">Deal</button>
        <button id="hitBtn" class="btn-ghost" disabled>Hit</button>
        <button id="standBtn" class="btn-ghost" disabled>Stand</button>
        <button id="doubleBtn" class="btn-ghost" disabled>Double</button>
        <div class="small">Bank: <span id="bankDisplay">$0</span></div>
        <input id="betInput" type="number" min="1" value="25" />
      </div>

      <div id="status" class="status">Click Deal to start.</div>
    </div>
  </div>

  <script>
    const SUITS = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
    const RANKS = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    const COOKIE_NAME = 'balance';

    let deck = [], dealer = [], player = [];
    let bank = 0;
    let currentBet = 25;
    let inRound = false;
    let doubled = false;

    const dealerHandEl = document.getElementById('dealerHand');
    const playerHandEl = document.getElementById('playerHand');
    const dealerValueEl = document.getElementById('dealerValue');
    const playerValueEl = document.getElementById('playerValue');
    const bankDisplay = document.getElementById('bankDisplay');
    const statusEl = document.getElementById('status');
    const dealBtn = document.getElementById('dealBtn');
    const hitBtn = document.getElementById('hitBtn');
    const standBtn = document.getElementById('standBtn');
    const doubleBtn = document.getElementById('doubleBtn');
    const betInput = document.getElementById('betInput');

    function readCookie(name) {
      const m = document.cookie.split(';').map(s => s.trim()).find(s => s.startsWith(name + '='));
      return m ? decodeURIComponent(m.split('=').slice(1).join('=')) : null;
    }

    function setCookie(name, value, days = 365) {
      const expires = new Date(Date.now() + days * 864e5).toUTCString();
      document.cookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}; expires=${expires}; path=/`;
    }

    function buildDeck() {
      const d = [];
      for (const s of SUITS) for (const r of RANKS) d.push({ suit: s, rank: r });
      for (let i = d.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [d[i], d[j]] = [d[j], d[i]];
      }
      return d;
    }

    function cardValue(c) {
      if (c.rank === 'A') return 11;
      if (['J','Q','K'].includes(c.rank)) return 10;
      return Number(c.rank);
    }

    function handValue(cards) {
      let total = 0, aces = 0;
      for (const c of cards) {
        if (c.rank === 'A') { aces++; total += 11; }
        else total += cardValue(c);
      }
      while (total > 21 && aces > 0) { total -= 10; aces--; }
      return total;
    }

    function isBlackjack(cards) {
      return cards.length === 2 && handValue(cards) === 21;
    }

    function renderCard(c, hidden = false) {
      const el = document.createElement('div');
      el.className = 'card' + ((c.suit === '‚ô•' || c.suit === '‚ô¶') ? ' red' : ' blue');
      el.innerHTML = hidden
        ? `<div class="top">?</div><div class="center">?</div><div class="bot">?</div>`
        : `<div class="top">${c.rank}${c.suit}</div><div class="center">${c.suit}</div><div class="bot">${c.suit}${c.rank}</div>`;
      return el;
    }

    function updateUI(showDealer = false) {
      dealerHandEl.innerHTML = '';
      playerHandEl.innerHTML = '';
      dealer.forEach((c, i) => dealer
